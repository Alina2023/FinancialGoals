<Window x:Class="FinancialGoals.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:local="clr-namespace:FinancialGoals"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Financial Goals" Height="600" Width="1000">
    <Grid Margin="8">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="270"/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>

        <!-- LEFT PANEL: список целей с прогресс-баром, сортировка и фильтр -->
        <StackPanel Grid.Column="0" Margin="0,0,1,0">
            <TextBlock Text="Goals" FontWeight="Bold" FontSize="16" Margin="4"/>

            <!-- Сортировка -->
            <StackPanel Orientation="Horizontal" Margin="4" VerticalAlignment="Center">
                <TextBlock Text="Sort:" VerticalAlignment="Center" Margin="0,0,6,0"/>
                <ComboBox Name="cmbSort" Width="150" SelectionChanged="CmbSort_SelectionChanged">
                    <ComboBoxItem>None</ComboBoxItem>
                    <ComboBoxItem>By progress (desc)</ComboBoxItem>
                    <ComboBoxItem>By target date (asc)</ComboBoxItem>
                </ComboBox>
            </StackPanel>

            <!-- Фильтр: близкие к дедлайну -->
            <StackPanel Orientation="Horizontal" Margin="4" VerticalAlignment="Center">
                <CheckBox Name="chkNearDeadline" Content="Near deadline (months ≤)" VerticalAlignment="Center" Checked="FilterControls_Changed" Unchecked="FilterControls_Changed"/>
                <TextBox Name="tbDeadlineMonths" Width="40" Text="3" Margin="6,0,0,0" TextChanged="FilterControls_Changed"/>
            </StackPanel>

            <!-- Список с DataTemplate -->
            <ListBox Name="lbGoals" Height="300" Margin="4" SelectionChanged="LbGoals_SelectionChanged">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="LightGray" BorderThickness="0,0,0,1" Padding="6">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding Name}" FontWeight="Bold" Width="140"/>
                                    
                                    <TextBlock Text="{Binding PercentComplete, Mode=OneWay, StringFormat='{}{0:F2}%'}" HorizontalAlignment="Right"/>
                                </StackPanel>
                               
                                <ProgressBar Minimum="0" Maximum="100" Value="{Binding PercentComplete, Mode=OneWay}" Height="14" Margin="0,6,0,2"/>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                                    <TextBlock Text="{Binding ProgressSummary}" FontSize="11" Foreground="Gray"/>
                                    <TextBlock Text="{Binding TargetDate, StringFormat='   due: {0:yyyy-MM}'}" FontSize="11" Foreground="Gray" Margin="8,0,0,0"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

            <!-- Кнопки управления -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="4">
                <Button Content="New" Width="80" Click="BtnNew_Click" Margin="4"/>
                <Button Content="Edit" Width="80" Click="BtnEdit_Click" Margin="4"/>
                <Button Content="Delete" Width="80" Click="BtnDelete_Click" Margin="4"/>
            </StackPanel>

            <StackPanel Orientation="Horizontal" Margin="4">
                <Button Content="Save list" Width="100" Click="BtnSaveList_Click" Margin="4"/>
                <Button Content="Load list" Width="100" Click="BtnLoadList_Click" Margin="4"/>
            </StackPanel>

            <Button Content="Open Report" Width="220" Margin="8" Click="BtnOpenReport_Click"/>
        </StackPanel>

        <!-- RIGHT PANEL: детали выбранной цели -->
        <StackPanel Grid.Column="1" Margin="10,12,12,12">
            <TextBlock Text="Selected Goal" FontWeight="Bold" FontSize="16" />
            <StackPanel Orientation="Horizontal" Margin="0,8">
                <TextBlock Text="Name:" Width="120"/>
                <TextBox Name="txtName" Width="300"/>
            </StackPanel>

            <StackPanel Orientation="Horizontal" Margin="0,4">
                <TextBlock Text="Target amount:" Width="120"/>
                <TextBox Name="txtTargetAmount" Width="150"/>
                <TextBlock Text="Current amount:" Width="120" Margin="20,0,0,0"/>
                <TextBox Name="txtCurrentAmount" Width="150"/>
            </StackPanel>

            <StackPanel Orientation="Horizontal" Margin="0,4">
                <TextBlock Text="Annual rate %:" Width="120"/>
                <TextBox Name="txtAnnualRate" Width="100"/>
                <TextBlock Text="Monthly contribution:" Width="150" Margin="20,0,0,0"/>
                <TextBox Name="txtMonthlyContribution" Width="120"/>
            </StackPanel>

            <StackPanel Orientation="Horizontal" Margin="0,4">
                <TextBlock Text="Target date (optional):" Width="150"/>
                <DatePicker Name="dpTargetDate" Width="150"/>
                <Button Content="Calculate" Width="100" Margin="20,0,0,0" Click="BtnCalculate_Click"/>
            </StackPanel>

            <TextBlock Name="txtResultSummary" Margin="0,12" FontWeight="Bold"/>

            <WrapPanel Margin="0,8">
                <Button Content="Apply (Save goal)" Width="140" Click="BtnApply_Click" Margin="4"/>
                <Button Content="Simulate" Width="120" Click="BtnSimulate_Click" Margin="4"/>
                <Button Content="Export CSV" Width="110" Click="BtnExportCsv_Click" Margin="4"/>
            </WrapPanel>

            <TextBlock Text="Simulation preview (first 6 months):" Margin="0,12" FontWeight="Bold"/>
            <DataGrid Name="dgPreview" Height="180" IsReadOnly="True" AutoGenerateColumns="True"/>
        </StackPanel>
    </Grid>
</Window>



